(this["webpackJsonpprivate-chat"]=this["webpackJsonpprivate-chat"]||[]).push([[0],{46:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(2),r=a.n(c),s=a(28),i=a.n(s),o=a(12),u=a(17),l=a(26),p=a(6),h=a(9),m=a(20);a(39),a(41),a(58);m.a.initializeApp({apiKey:"AIzaSyA0c4AngClsnqXDPQqoxhD9mVYgQom-65I",authDomain:"private-chat-edd81.firebaseapp.com",databaseURL:"https://private-chat-edd81.firebaseio.com",storageBucket:"private-chat-edd81.appspot.com"});var j=m.a.auth,b=m.a.database(),d=m.a.storage(),f=a(5),O=a.n(f),x=a(8),v=function(){var e=Object(x.a)(O.a.mark((function e(t,a){var n,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.ref(t.uid+"/profilePicture/"+a.name),e.next=3,n.put(a);case 3:return e.next=5,n.getDownloadURL().catch((function(e){throw e}));case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),g=function(){var e=Object(x.a)(O.a.mark((function e(t,a,n,c){var r,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j().createUserWithEmailAndPassword(t,a);case 2:return r=j().currentUser,e.next=5,v(r,c);case 5:return s=e.sent,e.abrupt("return",r.updateProfile({displayName:n,photoURL:s}));case 7:case"end":return e.stop()}}),e)})));return function(t,a,n,c){return e.apply(this,arguments)}}(),_=function(e,t){return j().signInWithEmailAndPassword(e,t)},N=function(){var e=new j.GoogleAuthProvider;return j().signInWithPopup(e)},w=function(){var e=new j.GithubAuthProvider;return j().signInWithPopup(e)},y=(a(46),function(){return Object(n.jsx)("header",{className:"cmp-header",children:Object(n.jsxs)("nav",{className:"cmp-header__nav",children:[Object(n.jsx)(h.b,{className:"cmp-header__nav--link",to:"/",children:"Private Chat"}),Object(n.jsx)("div",{className:"cmp-header__nav__profile",children:j().currentUser&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("img",{className:"cmp-header__nav__profile--avatar",alt:"profilePicture",src:j().currentUser.photoURL}),Object(n.jsx)("button",{onClick:function(){return j().signOut()},children:"Logout"})]})})]})})}),k=(a(51),function(){return Object(n.jsx)("footer",{className:"cmp-footer",children:Object(n.jsx)("div",{className:"cmp-footer--paragraph",children:Object(n.jsx)("p",{children:"\xa9 Private Chat 2020."})})})}),S=(a(52),function(){return Object(n.jsxs)("div",{className:"cmp-home",children:[Object(n.jsx)(y,{}),Object(n.jsxs)("section",{className:"cmp-home__content",children:[Object(n.jsx)("h1",{className:"cmp-home__content--title",children:"Welcome to Private Chat"}),Object(n.jsx)("p",{className:"cmp-home__content--paragraph",children:"A great place to share your thoughts with friends"}),Object(n.jsxs)("div",{className:"cmp-home__content__links",children:[Object(n.jsx)(h.b,{className:"cmp-home__content__links--signup",to:"/signup",children:"Create New Account"}),Object(n.jsx)(h.b,{className:"cmp-home__content__links--signin",to:"/login",children:"Login to Your Account"})]})]}),Object(n.jsx)(k,{})]})}),C=a(30),P=a(31),E=a(19),A=a(33),D=a(32),R=(a(53),function(e){var t=e.dark;return Object(n.jsx)("div",{className:"cmp-loader",children:Object(n.jsx)("div",{className:"spinner ".concat(t?"dark":"")})})}),U=(a(54),function(e){Object(A.a)(a,e);var t=Object(D.a)(a);function a(e){var n;return Object(C.a)(this,a),(n=t.call(this,e)).state={user:j().currentUser,chats:[],content:"",readError:null,writeError:null,loadingChats:!1},n.handleChange=n.handleChange.bind(Object(E.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(E.a)(n)),n.myRef=r.a.createRef(),n}return Object(P.a)(a,[{key:"componentDidMount",value:function(){var e=Object(x.a)(O.a.mark((function e(){var t,a=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({readError:null,loadingChats:!0}),t=this.myRef.current;try{b.ref("chats").on("value",(function(e){var n=[];e.forEach((function(e){n.push(e.val())})),n.sort((function(e,t){return e.timestamp-t.timestamp})),a.setState({chats:n}),a.setState({loadingChats:!1}),t.scrollBy(0,t.scrollHeight)}))}catch(n){this.setState({readError:n.message,loadingChats:!1})}case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){this.setState({content:e.target.value})}},{key:"handleSubmit",value:function(){var e=Object(x.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({writeError:null}),a=this.myRef.current,e.prev=3,e.next=6,b.ref("chats").push({content:this.state.content,timestamp:Date.now(),uid:this.state.user.uid,displayName:this.state.user.displayName,avatar:this.state.user.photoURL});case 6:this.setState({content:""}),a.scrollBy(0,a.scrollHeight),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),this.setState({writeError:e.t0.message});case 13:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"formatTime",value:function(e){var t=new Date(e);return"".concat(t.getDate(),"/").concat(t.getMonth()+1,"/").concat(t.getFullYear()," ").concat(t.getHours(),":").concat(t.getMinutes())}},{key:"render",value:function(){var e=this;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(y,{}),Object(n.jsxs)("div",{className:"cmp-chat",ref:this.myRef,children:[this.state.loadingChats?Object(n.jsx)(R,{}):"",this.state.chats.map((function(t,a){return Object(n.jsx)("div",{className:"cmp-chat--item "+(e.state.user.uid===t.uid?"current-user":""),children:Object(n.jsxs)("div",{className:"cmp-chat--item__content",children:[Object(n.jsxs)("span",{className:"cmp-chat--item__content--paragraph",children:[e.state.user.uid!==t.uid&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("img",{className:"cmp-chat--item__content--avatar",alt:"avatar",src:t.avatar}),Object(n.jsx)("span",{className:"cmp-chat--item__content--sender",children:t.displayName})]}),t.content]}),Object(n.jsx)("span",{className:"cmp-chat--time",children:e.formatTime(t.timestamp)})]})},a)}))]}),Object(n.jsxs)("form",{onSubmit:this.handleSubmit,className:"cmp-chat--form",children:[Object(n.jsx)("input",{name:"content",type:"text",placeholder:"Your Text",onChange:this.handleChange,value:this.state.content}),this.state.readError?Object(n.jsx)("p",{children:this.state.readError}):null,Object(n.jsx)("button",{type:"submit",children:"Send"})]})]})}}]),a}(c.Component)),L=function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),a=t[0],r=t[1],s=Object(c.useState)(""),i=Object(o.a)(s,2),u=i[0],l=i[1],p=Object(c.useState)(""),m=Object(o.a)(p,2),j=m[0],b=m[1],d=Object(c.useState)({}),f=Object(o.a)(d,2),v=f[0],_=f[1],y=Object(c.useState)(""),k=Object(o.a)(y,2),S=k[0],C=k[1],P=function(e){"email"===e.target.name&&l(e.target.value),"password"===e.target.name&&C(e.target.value),"displayName"===e.target.name&&b(e.target.value),"avatar"===e.target.name&&_(e.target.files[0])},E=function(){var e=Object(x.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r(""),e.prev=2,e.next=5,g(u,S,j,v);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),r(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(x.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),r(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(x.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),r(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{className:"cmp-form",children:Object(n.jsxs)("form",{className:"cmp-form__container",autoComplete:"off",onSubmit:E,children:[Object(n.jsxs)("h1",{className:"cmp-form__container--title",children:["Sign up to",Object(n.jsx)(h.b,{to:"/",children:"Private Chat"})]}),Object(n.jsx)("p",{className:"cmp-form__container--paragraph",children:"Fill in the form below to register an account."}),Object(n.jsx)("input",{className:"cmp-form__container--input",placeholder:"Email",name:"email",type:"email",onChange:P,value:u}),Object(n.jsx)("input",{className:"cmp-form__container--input",placeholder:"Display Name",name:"displayName",type:"text",onChange:P,value:j}),Object(n.jsx)("input",{className:"cmp-form__container--input",placeholder:"Password",name:"password",onChange:P,value:S,type:"password"}),Object(n.jsx)("input",{className:"cmp-form__container--input",placeholder:"Avatar",name:"avatar",onChange:P,type:"file"}),Object(n.jsxs)(n.Fragment,{children:[a?Object(n.jsx)("p",{className:"cmp-form__container--paragraph",children:a}):null,Object(n.jsx)("div",{className:"cmp-form__container--submit",children:Object(n.jsx)("button",{type:"submit",children:"Sign up"})})]}),Object(n.jsx)("p",{className:"cmp-form__container--paragraph",children:"You can also sign up with any of these services"}),Object(n.jsx)("button",{type:"button",onClick:A,children:"Sign up with Google"}),Object(n.jsx)("button",{type:"button",onClick:D,children:"Sign up with GitHub"}),Object(n.jsx)("hr",{}),Object(n.jsxs)("p",{children:["Already have an account? ",Object(n.jsx)(h.b,{to:"/login",children:"Sign in"})]})]})})},F=(a(55),function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),a=t[0],r=t[1],s=Object(c.useState)(""),i=Object(o.a)(s,2),u=i[0],l=i[1],p=Object(c.useState)(""),m=Object(o.a)(p,2),j=m[0],b=m[1],d=function(e){"email"===e.target.name&&l(e.target.value),"password"===e.target.name&&b(e.target.value)},f=function(){var e=Object(x.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r(""),e.prev=2,e.next=5,_(u,j);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),r(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(x.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),r(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(x.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),r(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{className:"cmp-form",children:Object(n.jsxs)("form",{className:"cmp-form__container",autoComplete:"off",onSubmit:f,children:[Object(n.jsxs)("h1",{className:"cmp-form__container--title",children:["Login to",Object(n.jsx)(h.b,{className:"",to:"/",children:"Private Chat"})]}),Object(n.jsx)("p",{className:"cmp-form__container--paragraph",children:"Fill in the form below to login to your account."}),Object(n.jsx)("input",{className:"cmp-form__container--input",placeholder:"Email",name:"email",type:"email",onChange:d,value:u}),Object(n.jsx)("input",{className:"cmp-form__container--input",placeholder:"Password",name:"password",onChange:d,value:j,type:"password"}),Object(n.jsxs)(n.Fragment,{children:[a?Object(n.jsx)("p",{className:"cmp-form__container--paragraph",children:a}):null,Object(n.jsx)("div",{className:"cmp-form__container--submit",children:Object(n.jsx)("button",{type:"submit",children:"Login"})})]}),Object(n.jsx)("p",{className:"cmp-form__container--paragraph",children:"You can also log in with any of these services"}),Object(n.jsx)("button",{type:"button",onClick:v,children:"Sign in with Google"}),Object(n.jsx)("button",{type:"button",onClick:g,children:"Sign in with GitHub"}),Object(n.jsx)("hr",{}),Object(n.jsxs)("p",{children:["Don't have an account? ",Object(n.jsx)(h.b,{to:"/signup",children:"Sign up"})]})]})})}),G=(a(56),function(e){var t=e.component,a=e.authenticated,c=Object(l.a)(e,["component","authenticated"]);return Object(n.jsx)(p.b,Object(u.a)(Object(u.a)({},c),{},{render:function(e){return!0===a?Object(n.jsx)(t,Object(u.a)({},e)):Object(n.jsx)(p.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}),I=function(e){var t=e.component,a=e.authenticated,c=Object(l.a)(e,["component","authenticated"]);return Object(n.jsx)(p.b,Object(u.a)(Object(u.a)({},c),{},{render:function(e){return!1===a?Object(n.jsx)(t,Object(u.a)({},e)):Object(n.jsx)(p.a,{to:"/chat"})}}))},Y=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),a=t[0],r=t[1],s=Object(c.useState)(!0),i=Object(o.a)(s,2),u=i[0],l=i[1];return Object(c.useEffect)((function(){j().onAuthStateChanged((function(e){e?(r(!0),l(!1)):(r(!1),l(!1))}))})),!0===u?Object(n.jsx)(R,{dark:!0}):Object(n.jsx)(h.a,{children:Object(n.jsxs)(p.d,{children:[Object(n.jsx)(p.b,{exact:!0,path:"/",component:S}),Object(n.jsx)(G,{path:"/chat",authenticated:a,component:U}),Object(n.jsx)(I,{path:"/signup",authenticated:a,component:L}),Object(n.jsx)(I,{path:"/login",authenticated:a,component:F})]})})},H=document.getElementById("root");i.a.render(Object(n.jsx)(Y,{}),H)}},[[57,1,2]]]);
//# sourceMappingURL=main.bdfade25.chunk.js.map