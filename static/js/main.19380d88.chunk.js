(this["webpackJsonpprivate-chat"]=this["webpackJsonpprivate-chat"]||[]).push([[0],{45:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(2),r=n.n(c),s=n(28),i=n.n(s),o=n(13),u=n(17),l=n(26),h=n(5),p=n(8),m=n(20);n(39),n(41);m.a.initializeApp({apiKey:"AIzaSyA0c4AngClsnqXDPQqoxhD9mVYgQom-65I",authDomain:"private-chat-edd81.firebaseapp.com",databaseURL:"https://private-chat-edd81.firebaseio.com"});var j=m.a.auth,b=m.a.database(),d=function(e,t){return j().createUserWithEmailAndPassword(e,t)},f=function(e,t){return j().signInWithEmailAndPassword(e,t)},O=function(){var e=new j.GoogleAuthProvider;return j().signInWithPopup(e)},x=function(){var e=new j.GithubAuthProvider;return j().signInWithPopup(e)},v=(n(45),function(){return Object(a.jsx)("header",{className:"cmp-header",children:Object(a.jsxs)("nav",{className:"cmp-header__nav",children:[Object(a.jsx)(p.b,{className:"cmp-header__nav--link",to:"/",children:"Private Chat"}),Object(a.jsx)("div",{className:"cmp-header__nav__profile",children:j().currentUser&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(p.b,{className:"",to:"/chat",children:[j().currentUser.email," "]}),Object(a.jsx)("button",{className:"",onClick:function(){return j().signOut()},children:"Logout"})]})})]})})}),g=(n(50),function(){return Object(a.jsx)("footer",{className:"cmp-footer",children:Object(a.jsx)("div",{className:"cmp-footer--paragraph",children:Object(a.jsx)("p",{children:"\xa9 Private Chat 2020."})})})}),_=(n(51),function(){return Object(a.jsxs)("div",{className:"cmp-home",children:[Object(a.jsx)(v,{}),Object(a.jsxs)("section",{className:"cmp-home__content",children:[Object(a.jsx)("h1",{className:"cmp-home__content--title",children:"Welcome to Private Chat"}),Object(a.jsx)("p",{className:"cmp-home__content--paragraph",children:"A great place to share your thoughts with friends"}),Object(a.jsxs)("div",{className:"cmp-home__content__links",children:[Object(a.jsx)(p.b,{className:"cmp-home__content__links--signup",to:"/signup",children:"Create New Account"}),Object(a.jsx)(p.b,{className:"cmp-home__content__links--signin",to:"/login",children:"Login to Your Account"})]})]}),Object(a.jsx)(g,{})]})}),w=n(7),N=n.n(w),y=n(12),k=n(30),S=n(31),C=n(19),E=n(33),P=n(32),A=(n(53),n(54),function(e){var t=e.dark;return Object(a.jsx)("div",{className:"cmp-loader",children:Object(a.jsx)("div",{className:"spinner ".concat(t?"dark":"")})})}),D=function(e){Object(E.a)(n,e);var t=Object(P.a)(n);function n(e){var a;return Object(k.a)(this,n),(a=t.call(this,e)).state={user:j().currentUser,chats:[],content:"",readError:null,writeError:null,loadingChats:!1},a.handleChange=a.handleChange.bind(Object(C.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(C.a)(a)),a.myRef=r.a.createRef(),a}return Object(S.a)(n,[{key:"componentDidMount",value:function(){var e=Object(y.a)(N.a.mark((function e(){var t,n=this;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({readError:null,loadingChats:!0}),t=this.myRef.current;try{b.ref("chats").on("value",(function(e){var a=[];e.forEach((function(e){a.push(e.val())})),a.sort((function(e,t){return e.timestamp-t.timestamp})),n.setState({chats:a}),t.scrollBy(0,t.scrollHeight),n.setState({loadingChats:!1})}))}catch(a){this.setState({readError:a.message,loadingChats:!1})}case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){this.setState({content:e.target.value})}},{key:"handleSubmit",value:function(){var e=Object(y.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({writeError:null}),n=this.myRef.current,e.prev=3,e.next=6,b.ref("chats").push({content:this.state.content,timestamp:Date.now(),uid:this.state.user.uid});case 6:this.setState({content:""}),n.scrollBy(0,n.scrollHeight),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),this.setState({writeError:e.t0.message});case 13:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"formatTime",value:function(e){var t=new Date(e);return"".concat(t.getDate(),"/").concat(t.getMonth()+1,"/").concat(t.getFullYear()," ").concat(t.getHours(),":").concat(t.getMinutes())}},{key:"render",value:function(){var e=this;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(v,{}),Object(a.jsxs)("div",{className:"cmp-chat",ref:this.myRef,children:[this.state.loadingChats?Object(a.jsx)(A,{}):"",this.state.chats.map((function(t,n){return Object(a.jsx)("div",{className:"cmp-chat--item "+(e.state.user.uid===t.uid?"current-user":""),children:Object(a.jsxs)("div",{className:"cmp-chat--item__content",children:[Object(a.jsx)("span",{className:"cmp-chat--item__content--paragraph",children:t.content}),Object(a.jsx)("span",{className:"cmp-chat--time",children:e.formatTime(t.timestamp)})]})},n)}))]}),Object(a.jsxs)("form",{onSubmit:this.handleSubmit,className:"cmp-chat--form",children:[Object(a.jsx)("input",{name:"content",type:"text",placeholder:"Your Text",onChange:this.handleChange,value:this.state.content}),this.state.readError?Object(a.jsx)("p",{children:this.state.readError}):null,Object(a.jsx)("button",{type:"submit",children:"Send"})]})]})}}]),n}(c.Component),F=function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(""),i=Object(o.a)(s,2),u=i[0],l=i[1],h=Object(c.useState)(""),m=Object(o.a)(h,2),j=m[0],b=m[1],f=function(e){"email"===e.target.name&&l(e.target.value),"password"===e.target.name&&b(e.target.value)},v=function(){var e=Object(y.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r(""),e.prev=2,e.next=5,d(u,j);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),r(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(y.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),r(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(y.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),r(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"cmp-form",children:Object(a.jsxs)("form",{className:"cmp-form__container",autoComplete:"off",onSubmit:v,children:[Object(a.jsxs)("h1",{className:"cmp-form__container--title",children:["Sign up to",Object(a.jsx)(p.b,{to:"/",children:"Private Chat"})]}),Object(a.jsx)("p",{className:"cmp-form__container--paragraph",children:"Fill in the form below to register an account."}),Object(a.jsx)("input",{className:"cmp-form__container--input",placeholder:"Email",name:"email",type:"email",onChange:f,value:u}),Object(a.jsx)("input",{className:"cmp-form__container--input",placeholder:"Password",name:"password",onChange:f,value:j,type:"password"}),Object(a.jsxs)(a.Fragment,{children:[n?Object(a.jsx)("p",{className:"cmp-form__container--paragraph",children:n}):null,Object(a.jsx)("div",{className:"cmp-form__container--submit",children:Object(a.jsx)("button",{type:"submit",children:"Sign up"})})]}),Object(a.jsx)("p",{className:"cmp-form__container--paragraph",children:"You can also sign up with any of these services"}),Object(a.jsx)("button",{type:"button",onClick:g,children:"Sign up with Google"}),Object(a.jsx)("button",{type:"button",onClick:_,children:"Sign up with GitHub"}),Object(a.jsx)("hr",{}),Object(a.jsxs)("p",{children:["Already have an account? ",Object(a.jsx)(p.b,{to:"/login",children:"Sign in"})]})]})})},G=(n(55),function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(""),i=Object(o.a)(s,2),u=i[0],l=i[1],h=Object(c.useState)(""),m=Object(o.a)(h,2),j=m[0],b=m[1],d=function(e){"email"===e.target.name&&l(e.target.value),"password"===e.target.name&&b(e.target.value)},v=function(){var e=Object(y.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r(""),e.prev=2,e.next=5,f(u,j);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),r(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(y.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),r(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(y.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),r(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"cmp-form",children:Object(a.jsxs)("form",{className:"cmp-form__container",autoComplete:"off",onSubmit:v,children:[Object(a.jsxs)("h1",{className:"cmp-form__container--title",children:["Login to",Object(a.jsx)(p.b,{className:"",to:"/",children:"Private Chat"})]}),Object(a.jsx)("p",{className:"cmp-form__container--paragraph",children:"Fill in the form below to login to your account."}),Object(a.jsx)("input",{className:"cmp-form__container--input",placeholder:"Email",name:"email",type:"email",onChange:d,value:u}),Object(a.jsx)("input",{className:"cmp-form__container--input",placeholder:"Password",name:"password",onChange:d,value:j,type:"password"}),Object(a.jsxs)(a.Fragment,{children:[n?Object(a.jsx)("p",{className:"cmp-form__container--paragraph",children:n}):null,Object(a.jsx)("div",{className:"cmp-form__container--submit",children:Object(a.jsx)("button",{type:"submit",children:"Login"})})]}),Object(a.jsx)("p",{className:"cmp-form__container--paragraph",children:"You can also log in with any of these services"}),Object(a.jsx)("button",{type:"button",onClick:g,children:"Sign in with Google"}),Object(a.jsx)("button",{type:"button",onClick:_,children:"Sign in with GitHub"}),Object(a.jsx)("hr",{}),Object(a.jsxs)("p",{children:["Don't have an account? ",Object(a.jsx)(p.b,{to:"/signup",children:"Sign up"})]})]})})}),I=(n(56),function(e){var t=e.component,n=e.authenticated,c=Object(l.a)(e,["component","authenticated"]);return Object(a.jsx)(h.b,Object(u.a)(Object(u.a)({},c),{},{render:function(e){return!0===n?Object(a.jsx)(t,Object(u.a)({},e)):Object(a.jsx)(h.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}),R=function(e){var t=e.component,n=e.authenticated,c=Object(l.a)(e,["component","authenticated"]);return Object(a.jsx)(h.b,Object(u.a)(Object(u.a)({},c),{},{render:function(e){return!1===n?Object(a.jsx)(t,Object(u.a)({},e)):Object(a.jsx)(h.a,{to:"/chat"})}}))},Y=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(!0),i=Object(o.a)(s,2),u=i[0],l=i[1];return Object(c.useEffect)((function(){j().onAuthStateChanged((function(e){e?(r(!0),l(!1)):(r(!1),l(!1))}))})),!0===u?Object(a.jsx)(A,{dark:!0}):Object(a.jsx)(p.a,{children:Object(a.jsxs)(h.d,{children:[Object(a.jsx)(h.b,{exact:!0,path:"/",component:_}),Object(a.jsx)(I,{path:"/chat",authenticated:n,component:D}),Object(a.jsx)(R,{path:"/signup",authenticated:n,component:F}),Object(a.jsx)(R,{path:"/login",authenticated:n,component:G})]})})},H=document.getElementById("root");i.a.render(Object(a.jsx)(Y,{}),H)}},[[57,1,2]]]);
//# sourceMappingURL=main.19380d88.chunk.js.map